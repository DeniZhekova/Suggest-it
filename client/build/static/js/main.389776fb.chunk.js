(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(54),c=a.n(o),s=(a(68),a(3)),l=a(4),i=a(6),m=a(5),u=a(7),d=a(2),p=a.n(d),f=a(8),h=a(10),g=a.n(h),b=function(){var e=Object(f.a)(p.a.mark(function e(t,a,n){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/post/new/".concat(t),n,{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.data}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/post").then(function(e){return console.log(e),e.data}).catch(function(e){return console.log(e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/post/?page=".concat(t)).then(function(e){return console.log(e),e.data}).catch(function(e){return console.log(e.response),e.response});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N=function(e,t,a){return fetch("/api/post/like",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},w=function(e,t,a){return fetch("/api/post/unlike",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},y=function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/post/".concat(t)).then(function(e){return e.data}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(p.a.mark(function e(t,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/post/by/".concat(t),{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.data.result}).catch(function(e){return console.error(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(p.a.mark(function e(t,a){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/post/".concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(p.a.mark(function e(t,a,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/post/".concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a,n){return e.apply(this,arguments)}}(),S=function(e,t,a,n){return fetch("/api/post/comment",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},C=function(e,t,a,n){return fetch("/api/post/uncomment",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},O=a(1),P=a(22),T=a.n(P),F=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).loadMore=function(t){e.setState({page:e.state.page+t}),e.loadPosts(e.state.page+t)},e.loadLess=function(t){e.setState({page:e.state.page-t}),e.loadPosts(e.state.page-t)},e.loadPosts=function(t){v(t).then(function(t){t.error?console.log(t.error):(console.log(t.post),e.setState({posts:t.post}))})},e.renderPosts=function(e){return r.a.createElement("div",{className:"row"},e.map(function(e,t){var a=e.postedBy?"/user/".concat(e.postedBy._id):"",n=e.postedBy?e.postedBy.name:" Unknown";return r.a.createElement("div",{className:"card col-md-4",key:t},r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{src:"/api/post/photo/".concat(e._id),alt:e.title,onError:function(e){return e.target.src="".concat(T.a)},className:"img-fluid mb-3",style:{height:"200px",width:"100%",backgroundColor:"#0E2F56"}}),r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text",dangerouslySetInnerHTML:{__html:e.body.substring(0,200)+"..."}}),r.a.createElement("br",null),r.a.createElement("p",{className:"font-italic mark"},"Posted by"," ",r.a.createElement(O.b,{to:"".concat(a)},n," "),"on ",new Date(e.created).toDateString()),r.a.createElement(O.b,{to:"/post/".concat(e._id),className:"btn btn-raised btn-primary btn-sm"},"Read more")))}))},e.state={posts:[],page:1,loading:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.loadPosts(this.state.page),E().then(function(t){e.setState({posts:t.post,loading:!1})}).catch(function(e){return console.log(e.response)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.posts,n=t.loading,o=t.page;return n?r.a.createElement("h2",null,"Loading..."):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},a.length?"Recent Posts":"No more posts!"),this.renderPosts(a),o>1?r.a.createElement("button",{className:"btn btn-raised btn-warning mr-5 mt-5 mb-5",onClick:function(){return e.loadLess(1)}},"Previous (",this.state.page-1,")"):"",a.length?r.a.createElement("button",{className:"btn btn-raised btn-success mt-5 mb-5",onClick:function(){return e.loadMore(1)}},"Next (",o+1,")"):"")}}]),a}(n.Component);var A=function(){return r.a.createElement("div",{className:"mb-5"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,"Home"),r.a.createElement("p",{className:"lead"},"Welcome To Suggest-It. You can post, edit, delete,like and sign suggestions ")),r.a.createElement("div",{className:"container-fluid"},r.a.createElement(F,null)))},_=function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())},D=function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window){e.next=11;break}return localStorage.removeItem("jwt"),t(),e.prev=3,e.next=6,g.a.get("/api/signout").then(function(e){return console.log("signout success")}).catch(function(e){return console.error(e)});case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return",console.log(e.t0));case 11:case"end":return e.stop()}},e,null,[[3,8]])}));return function(t){return e.apply(this,arguments)}}(),I=function(e){return console.log("email: ",e),fetch("/api/forgot-password/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},B=function(e){return fetch("/api/reset-password/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},R=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},L=function(){var e=Object(f.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/social-login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,console.log("signin response: ",a),e.abrupt("return",a.json());case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),z=Object(u.g)(function(e){var t=e.history,a=R()?R().user.name:"",n=R()?R().user._id:"";return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark scrolling-navbar",style:{backgroundColor:"#0E2F56"}},r.a.createElement(O.c,{to:"/",className:"navbar-brand"},r.a.createElement("img",{alt:"brand",src:T.a,style:{height:"100px",maxWidth:"140px",marginTop:"-30px",marginBottom:"-40px"}})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item",style:{marginTop:"5px"}},r.a.createElement(O.c,{exact:!0,to:"/",className:"nav-link",activeClassName:"line"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item",style:{marginTop:"5px"}},r.a.createElement(O.c,{exact:!0,to:"/users",className:"nav-link",activeClassName:"line"},"Users ",r.a.createElement("span",{className:"sr-only"},"(current)"))),!1===R()?r.a.createElement("li",{className:"nav-item ml-2"},r.a.createElement("div",{className:"ui buttons"},r.a.createElement(O.c,{to:"/login"},r.a.createElement("button",{className:"ui button"},"Login")),r.a.createElement("div",{className:"or","data-text":"or"}),r.a.createElement(O.c,{to:"/signup"},r.a.createElement("button",{className:"ui positive button"},"Register")))):null,R()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"navbar-text ml-auto white-text"},r.a.createElement(O.c,{className:"nav-link",activeClassName:"line",to:"/create/post"},"Create Suggestion")))),r.a.createElement("ul",{className:"navbar-nav ml-auto nav-flex-icons"},R()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"navbar-text ml-auto white-text"},r.a.createElement(O.c,{className:"nav-link",activeClassName:"line",to:"/user/".concat(n)},a))),R()&&"admin"===R().user.role&&r.a.createElement("li",{className:"nav-item",style:{marginTop:"5px"}},r.a.createElement(O.c,{to:"/admin",activeClassName:"line",className:"nav-link"},"Admin Tools")),R()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"navbar-text ml-auto white-text"},r.a.createElement(O.c,{className:"nav-link",activeClassName:"line",to:"/findpeople"},"Find People"))),R()?r.a.createElement("li",{className:"nav-item ml-2"},r.a.createElement("span",{className:"ui red button",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return D(function(){return t.push("/")})}},"Signout")):null)))}),q=a(12),U=a(14),M=a(30),H=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(M.a)(e,2),a=t[0],o=t[1],c=a.name,s=a.email,l=a.password,i=a.error,m=a.success,u=function(e){return function(t){o(Object(U.a)(Object(U.a)({},a),{},Object(q.a)({error:!1},e,t.target.value))),console.log(e)}},d=function(e){e.preventDefault(),o(Object(U.a)(Object(U.a)({},a),{},{error:!1}));var t={name:c,email:s,password:l};g.a.post("/api/signup",t).then(function(e){o({name:"",email:"",password:"",error:!1,success:!0})}).catch(function(e){o(Object(U.a)(Object(U.a)({},a),{},{error:e.response.data.error,success:!1})),console.log(e.response.data)})};return r.a.createElement("div",{className:"container",style:{marginTop:"1vh",padding:"5vw"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card cloudy-knoxville-gradient"},r.a.createElement("h5",{className:"card-header info-color white-text text-center py-4"},r.a.createElement("strong",null,"Sign up")),r.a.createElement("div",{className:"alert alert-danger",style:{display:i?"":"none"}},i),r.a.createElement("div",{className:"alert alert-info",style:{display:m?"":"none"}},"New account is created. Please ",r.a.createElement(O.b,{to:"/login"},"Signin")),r.a.createElement("div",{className:"card-body px-lg-5 pt-0"},r.a.createElement("form",{onSubmit:d,className:"text-center",style:{color:"#757575"}},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{type:"text",required:"required",onChange:u("name"),value:c,id:"materialRegisterFormLastName",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialRegisterFormLastName"},"Full Name"))),r.a.createElement("div",{className:"md-form mt-0"},r.a.createElement("input",{type:"email",required:!0,onChange:u("email"),value:s,id:"materialRegisterFormEmail",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialRegisterFormEmail"},"E-mail")),r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{type:"password",autoComplete:"current-password",required:!0,onChange:u("password"),value:l,id:"materialRegisterFormPassword",className:"form-control","aria-describedby":"materialRegisterFormPasswordHelpBlock"}),r.a.createElement("label",{htmlFor:"materialRegisterFormPassword"},"Password"),r.a.createElement("small",{id:"materialRegisterFormPasswordHelpBlock",className:"form-text text-muted mb-4"},"The password must be at least 6 characters and to contain a number")),r.a.createElement("button",{onClick:d,className:"btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0",type:"submit"},"Sign up"),r.a.createElement("hr",null))))))},J=function(){var e=Object(f.a)(p.a.mark(function e(t,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/user/".concat(t),{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(p.a.mark(function e(t,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("/api/user/".concat(t),{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(f.a)(p.a.mark(function e(t,a,n){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/".concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n}).then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/users").then(function(e){return e.data.users}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Y=function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var a=JSON.parse(localStorage.getItem("jwt"));a.user=e,localStorage.setItem("jwt",JSON.stringify(a)),t()}},$=function(){var e=Object(f.a)(p.a.mark(function e(t,a,n){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.a.put("/api/user/follow",{userId:t,followId:n},{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.data}).catch(function(e){return console.log(e)}));case 1:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(f.a)(p.a.mark(function e(t,a,n){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/unfollow",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({userId:t,unfollowId:n})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(f.a)(p.a.mark(function e(t,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/user/findpeople/".concat(t),{headers:{Authorization:"Bearer ".concat(a)}}).then(function(e){return e.data}).catch(function(e){return console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),X=a(20),Z=a.n(X),ee=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={redirect:!1},e.deleteAccount=function(){var t=e.props.userId,a=R().token;W(t,a).then(function(t){D(function(){return console.log("signout")}),e.setState({redirect:!0})}).catch(function(e){return console.log(e)})},e.deleteConfirm=function(){window.confirm("Are u sure to delete the account?")&&e.deleteAccount()},e}return Object(l.a)(a,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(u.a,{to:"/"}):r.a.createElement("button",{onClick:this.deleteConfirm,className:"btn btn-raised btn-danger"},"Delete")}}]),a}(n.Component),te=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).followClick=function(){console.log("i m follow"),e.props.onButtonClick($)},e.unfollowClick=function(){console.log("i m unfollow"),e.props.onButtonClick(K)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"d-inline-block mt-2"},this.props.following?r.a.createElement("button",{onClick:this.unfollowClick,className:"btn btn-success btn-raised mt-5"},"UnFollow"):r.a.createElement("button",{onClick:this.followClick,className:"btn btn-success btn-raised mt-5"},"Follow"))}}]),a}(n.Component),ae=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.following,a=e.followers,n=e.posts;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},a.length," Followers"),r.a.createElement("hr",null),a.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement(O.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid black"},className:"float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(Z.a)},src:"/api/user/photo/".concat(e._id),alt:e.name}),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.name)))),r.a.createElement("br",null))})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},t.length," Following"),r.a.createElement("hr",null),t.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement(O.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid black"},className:"float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(Z.a)},src:"/api/user/photo/".concat(e._id),alt:e.name}),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.name)))),r.a.createElement("br",null))})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},n.length," Posts"),r.a.createElement("hr",null),n.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement(O.b,{to:"/post/".concat(e._id)},r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.title)))))}))))}}]),a}(n.Component),ne=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).checkFollow=function(e){var t=R();return e.followers.find(function(e){return e._id===t.user._id})},e.clickFollowButton=function(t){t(R().user._id,R().token,e.state.user._id).then(function(t){console.log(t),e.setState({user:t,following:!e.state.following})}).catch(function(t){return e.setState({error:t.response})})},e.init=function(t){var a=R().token;J(t,a).then(function(n){if(n.error)e.setState({redirectToSignin:!0});else{k(t,a).then(function(t){e.setState({posts:t})});var r=e.checkFollow(n.data);e.setState({user:n.data,following:r})}})},e.state={user:{following:[],followers:[]},redirectToSignin:!1,following:!1,error:"",posts:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.init(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.userId;this.init(t)}},{key:"render",value:function(){var e=this.state,t=e.redirectToSignin,a=e.posts,n=e.user;if(t)return r.a.createElement(u.a,{to:"/login"});var o=n._id?"/api/user/photo/".concat(n._id):Z.a;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Profile"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("img",{style:{height:"200px",width:"auto"},className:"img-thumbnail",src:o,onError:function(e){return e.target.src="".concat(Z.a)},alt:n.name})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"lead mt-2"},r.a.createElement("p",null,"Hello ",n.name),r.a.createElement("p",null,"Email: ",n.email),r.a.createElement("p",null,"Joined ".concat(new Date(n.created).toDateString()))),R().user&&R().user._id===n._id?r.a.createElement("div",{className:"d-inline-block"},r.a.createElement(O.b,{className:"btn btn-raised btn-info mr-5",to:"/create/post"},"Create Post"),r.a.createElement(O.b,{className:"btn btn-raised btn-success mr-5",to:"/user/edit/".concat(n._id)},"Edit Profile"),r.a.createElement(ee,{userId:n._id})):r.a.createElement(te,{following:this.state.following,onButtonClick:this.clickFollowButton})),r.a.createElement("hr",null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col md-12 mt-5 mb-5"},r.a.createElement("hr",null),r.a.createElement("p",{className:"lead"},n.about),r.a.createElement("hr",null),r.a.createElement(ae,{posts:a,followers:this.state.user.followers,following:this.state.user.following}))),r.a.createElement("div",null,R().user&&"admin"===R().user.role&&r.a.createElement("div",{className:"card mt-5"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Admin"),r.a.createElement("p",{className:"mb-2 text-danger"},"Edit/Delete as an Admin"),r.a.createElement(O.b,{className:"btn btn-raised btn-success mr-5",to:"/user/edit/".concat(n._id)},"Edit Profile"),r.a.createElement(ee,{userId:n._id})))))}}]),a}(n.Component),re=a(56),oe=a.n(re),ce=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).responseGoogle=function(t){var a=t.profileObj,n=a.googleId,r=a.name,o=a.email,c=a.imageUrl;L({password:n,name:r,email:o,photo:c}).then(function(t){console.log("signin data: ",t),t.error?console.log("Error Login. Please try again.."):(console.log("signin success - setting jwt: ",t),_(t,function(){e.setState({redirectToReferrer:!0})}))})},e.state={redirectToReferrer:!1},e}return Object(l.a)(a,[{key:"render",value:function(){return this.state.redirectToReferrer?r.a.createElement(u.a,{to:"/"}):r.a.createElement(oe.a,{clientId:"679977054902-8oqj330iselscnql25oddlipp63kg5fk.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle})}}]),a}(n.Component),se=function(){var e=Object(n.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(M.a)(e,2),a=t[0],o=t[1],c=a.email,s=a.password,l=a.redirectToReferrer,i=a.loading,m=a.error,d=function(e){return function(t){o(Object(U.a)(Object(U.a)({},a),{},Object(q.a)({error:!1},e,t.target.value)))}};return r.a.createElement("div",{className:"container",style:{marginTop:"1vh",padding:"5vw"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card cloudy-knoxville-gradient"},r.a.createElement("h5",{className:"card-header info-color white-text text-center py-4"},r.a.createElement("strong",null,"Log In")),r.a.createElement("div",{className:"alert alert-danger",style:{display:m?"":"none"}},m),i&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h4",null,"Loading...")),function(){if(l)return r.a.createElement(u.a,{to:"/"})}(),r.a.createElement("div",{className:"card-body px-lg-5 pt-0"},r.a.createElement("form",{className:"text-center",style:{color:"#757575"},onSubmit:function(e){e.preventDefault();var t={email:c,password:s};console.log(c,s),o(Object(U.a)(Object(U.a)({},a),{},{error:!1,loading:!0})),g.a.post("/api/signin",t).then(function(e){_(e.data,function(){o({redirectToReferrer:!0})})}).catch(function(e){o(Object(U.a)(Object(U.a)({},a),{},{error:e}))})}},r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{type:"email",id:"materialLoginFormEmail",className:"form-control",onChange:d("email"),value:c,required:!0,autoComplete:"email"}),r.a.createElement("label",{htmlFor:"materialLoginFormEmail"},"Email")),r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{type:"password",id:"materialLoginFormPassword",className:"form-control",onChange:d("password"),value:s,required:!0,autoComplete:"password"}),r.a.createElement("label",{htmlFor:"materialLoginFormPassword"},"Password")),r.a.createElement("button",{className:"btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0",type:"submit"},"Log in"),r.a.createElement("p",null,r.a.createElement(O.b,{to:"/forgot-password",className:"text-danger"}," ","Forgot Password")),r.a.createElement("p",null,"Not a member?",r.a.createElement(O.b,{to:"/signup"},"Signup"))),r.a.createElement("p",null,"or sign in with:"),r.a.createElement(ce,null)))))},le=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={users:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;G().then(function(t){e.setState({users:t})}).catch(function(e){return console.log(e.response.data.error)})}},{key:"render",value:function(){var e=this.state.users;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Users"),r.a.createElement("div",{className:"card-deck"},e.map(function(e,t){return r.a.createElement("div",{key:t,className:"card testimonial-card"},r.a.createElement("div",{className:"card-up indigo lighten-1"}),r.a.createElement("div",{className:"avatar mx-auto white"},r.a.createElement("img",{alt:"avatar",src:e._id?"/api/user/photo/".concat(e._id):Z.a,className:"rounded-circle"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},e.name),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-quote-left"})," Email: ",e.email),r.a.createElement(O.b,{to:"/user/".concat(e._id)},"View Profile")))})))}}]),a}(n.Component),ie=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).init=function(t){var a=R().token;J(t,a).then(function(t){return e.setState({id:t.data.id,about:"",name:t.data.name,email:t.data.email})}).catch(function(e){return console.log(e)})},e.handleChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,o="photo"===t?a.target.files[0].size:0;e.userData.set(t,r),e.setState((n={},Object(q.a)(n,t,r),Object(q.a)(n,"fileSize",o),n))}},e.clickSubmit=function(t){if(t.preventDefault(),e.setState({loading:!0}),e.isValid()){var a=e.props.match.params.userId,n=R().token;V(a,n,e.userData).then(function(t){t.error?e.setState({error:t.error}):"admin"===R().user.role?e.setState({id:t._id,redirectToProfile:!0}):Y(t,function(){e.setState({id:t._id,redirectToProfile:!0})})})}},e.isValid=function(){var t=e.state,a=t.name,n=t.email,r=t.password;return t.fileSize>1e6?(e.setState({error:"File size should be less than 100kb",loading:!1}),!1):0===a.length?(e.setState({error:"Name is required",loading:!1}),!1):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n)?!(r.length>=1&&r.length<=5)||(e.setState({error:"Password must be at least 6 characters long",loading:!1}),!1):(e.setState({error:"A valid Email is required. Please, try again",loading:!1}),!1)},e.toggle=function(){var e=document.getElementById("materialRegisterFormPassword");"password"===e.type?e.type="text":e.type="password"},e.state={id:"",name:"",email:"",password:"",redirectToProfile:!1,loading:!1,fileSize:0,about:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.userData=new FormData;var e=this.props.match.params.userId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.name,n=e.email,o=e.redirectToProfile,c=e.loading,s=e.about;return o?r.a.createElement(u.a,{push:!0,to:"/user/".concat(t)}):r.a.createElement("div",{className:"container",style:{marginTop:"1vh",padding:"5vw"}},r.a.createElement("div",{className:"card cloudy-knoxville-gradient"},r.a.createElement("h5",{className:"card-header info-color white-text text-center py-4"},r.a.createElement("strong",null,"Edit Profile")),r.a.createElement("div",{className:"card-body px-lg-5 pt-0"},c?"Loading...":null,r.a.createElement("form",{onSubmit:this.clickSubmit,encType:"multipart/form-data",className:"text-center",style:{color:"#757575"}},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{type:"file",accept:"image/*",required:"required",onChange:this.handleChange("photo"),className:"form-control"}))),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{autoCapitalize:"true",autoComplete:"username",type:"text",required:"required",onChange:this.handleChange("name"),value:a,id:"materialRegisterFormLastName",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialRegisterFormLastName"},"Full Name"))),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{autoComplete:"email",type:"email",required:"required",onChange:this.handleChange("email"),value:n,id:"email",className:"form-control"}),r.a.createElement("label",{htmlFor:"email"},"Email"))),r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{autoComplete:"current-password",type:"password",required:"required",onChange:this.handleChange("password"),id:"materialRegisterFormPassword",className:"form-control","aria-describedby":"materialRegisterFormPasswordHelpBlock"}),r.a.createElement("label",{htmlFor:"materialRegisterFormPassword"},"Password"),r.a.createElement("button",{onClick:this.toggle},"Show Password"),r.a.createElement("small",{id:"materialRegisterFormPasswordHelpBlock",className:"form-text text-muted mb-4"},"Atleast 6 characters and 1 digit")),r.a.createElement("div",{className:"md-form"},r.a.createElement("textarea",{onChange:this.handleChange("about"),value:s,id:"materialContactFormMessage",className:"form-control md-textarea",rows:"3"}),r.a.createElement("label",{htmlFor:"materialContactFormMessage"},"About")),r.a.createElement("button",{onClick:this.clickSubmit,className:"btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0",type:"submit"},"Update")))))}}]),a}(n.Component),me=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={users:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=R().user._id,a=R().token;Q(t,a).then(function(t){e.setState({users:t})}).catch(function(e){return console.log(e.response.data.error)})}},{key:"render",value:function(){var e=this.state.users;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Find People"),r.a.createElement("div",{className:"card-deck"},e.map(function(e,t){return r.a.createElement("div",{key:t,className:"card testimonial-card"},r.a.createElement("div",{className:"card-up indigo lighten-1"}),r.a.createElement("div",{className:"avatar mx-auto white"},r.a.createElement("img",{alt:"avatar",src:e._id?"/api/user/photo/".concat(e._id):Z.a,className:"rounded-circle"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},e.name),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-quote-left"})," Email: ",e.email),r.a.createElement(O.b,{to:"/user/".concat(e._id)},"View Profile")))})))}}]),a}(n.Component),ue=a(28),de=a.n(ue),pe=a(29),fe=a.n(pe),he=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,o="photo"===t?a.target.files[0].size:0;e.postData.set(t,r),e.setState((n={},Object(q.a)(n,t,r),Object(q.a)(n,"fileSize",o),n))}},e.clickSubmit=function(t){if(t.preventDefault(),e.setState({loading:!0}),console.log(e.state),e.isValid()){var a=R().user._id,n=R().token;b(a,n,e.postData).then(function(t){t.error?e.setState({error:t.error,loading:!1}):e.setState({loading:!1,redirect:"true",title:"",body:"",photo:"",error:""})})}},e.isValid=function(){var t=e.state,a=t.title,n=t.body;return t.fileSize>1e6?(e.setState({error:"File size should be less than 100kb",loading:!1}),!1):!(a.length>=1&&n.length<=5)||(e.setState({error:"All fields must be at least 6 characters long",loading:!1}),!1)},e.state={title:"",body:"",photo:"",error:"",user:{},fileSize:0,loading:!1,redirect:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.postData=new FormData;var e=R().user;this.setState({user:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.redirect,o=t.user;return n?r.a.createElement(u.a,{to:"/user/".concat(o._id)}):r.a.createElement("div",{className:"container",style:{marginTop:"1vh",padding:"5vw"}},r.a.createElement("div",{className:"card cloudy-knoxville-gradient"},r.a.createElement("h5",{className:"card-header info-color white-text text-center py-4"},r.a.createElement("strong",null,"Create Post")),r.a.createElement("div",{className:"card-body px-lg-5 pt-0"},a?"Loading...":null,r.a.createElement("form",{onSubmit:this.clickSubmit,encType:"multipart/form-data",className:"text-center",style:{color:"#757575"}},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{type:"file",accept:"image/*",required:"required",onChange:this.handleChange("photo"),className:"form-control"}))),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"md-form"},r.a.createElement("input",{autoCapitalize:"true",autoComplete:"post",type:"text",required:"required",onChange:this.handleChange("title"),id:"materialRegisterFormLastName",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialRegisterFormLastName"},"Title "))),r.a.createElement("div",{className:"md-form"},r.a.createElement(de.a,{style:{height:"100px"},onInit:function(e){console.log("Editor is ready to use!",e),e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},onChange:function(t,a){var n=a.getData();e.postData.set("body",n),e.setState({body:n}),console.log(n)},editor:fe.a,data:"<p>Create Your Content</p><br/><br/><br/><br/><br/><br/>"})),r.a.createElement("button",{onClick:this.clickSubmit,className:"btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0",type:"submit"},"Create")))))}}]),a}(n.Component),ge=a(60),be=function(e){var t=e.component,a=Object(ge.a)(e,["component"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return R()?r.a.createElement(t,e):r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ee=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={text:"",error:""},e.handleChange=function(t){e.setState({error:""}),e.setState({text:t.target.value})},e.isValid=function(){var t=e.state.text;return!(!t.length>0||t.length>150)||(e.setState({error:"Comment should not be empty and less than 150 characters long"}),!1)},e.addComment=function(t){if(t.preventDefault(),!R())return e.setState({error:"Please signin to leave a comment"}),!1;if(e.isValid()){var a=R().user._id,n=R().token,r=e.props.postId;S(a,n,r,{text:e.state.text}).then(function(t){t.error?console.log(t.error):(e.setState({text:""}),e.props.updateComments(t.comments))})}},e.deleteComment=function(t){var a=R().user._id,n=R().token,r=e.props.postId;C(a,n,r,t).then(function(t){t.error?console.log(t.error):e.props.updateComments(t.comments)})},e.deleteConfirmed=function(t){window.confirm("Are you sure you want to delete your comment?")&&e.deleteComment(t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.comments,a=this.state.error;return r.a.createElement("div",null,r.a.createElement("h2",{className:"mt-5 mb-5"},"Leave a comment"),r.a.createElement("form",{onSubmit:this.addComment},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",onChange:this.handleChange,value:this.state.text,className:"form-control",placeholder:"Leave a comment..."}),r.a.createElement("button",{className:"btn btn-raised btn-success mt-2"},"Post"))),r.a.createElement("div",{className:"alert alert-danger",style:{display:a?"":"none"}},a),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",{className:"text-primary"},t.length," Comments"),r.a.createElement("hr",null),t.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("div",null,r.a.createElement(O.b,{to:"/user/".concat(t.postedBy)},r.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid black"},className:"float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(Z.a)},src:"/api/user/photo/".concat(t.postedBy),alt:t.postedBy.name})),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},t.text),r.a.createElement("p",{className:"font-italic mark"},"Posted by"," ",r.a.createElement(O.b,{to:"/user/".concat(t.postedBy)},t.postedBy.name," "),"on"," ",new Date(t.created).toDateString(),r.a.createElement("span",null,R().user&&R().user._id===t.postedBy&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(){return e.deleteConfirmed(t)},className:"text-danger float-right mr-1"},"Remove")))))))})))}}]),a}(n.Component),ve=a(23),Ne=function(e){var t=window.location.href,a=e.title,n={background:"#0E2F56"};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(ve.Twitter,{solid:!0,small:!0,link:t,label:a,style:n}),r.a.createElement(ve.Facebook,{solid:!0,small:!0,style:n,link:"http://sharingbuttons.io"}),r.a.createElement(ve.Mail,{solid:!0,small:!0,link:t,style:n,subject:"Suggest-it: ".concat(a)}),r.a.createElement(ve.Pinterest,{solid:!0,small:!0,message:"Suggest-it: ".concat(a),link:t}),r.a.createElement(ve.Linkedin,{solid:!0,small:!0,message:"Suggest-it: ".concat(a),link:t}),r.a.createElement(ve.Reddit,{solid:!0,small:!0,link:"http://sharingbuttons.io"}),r.a.createElement(ve.Whatsapp,{solid:!0,small:!0,message:"Suggest-it: ".concat(a),link:t})))},we=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={post:"",redirectToHome:!1,redirectToSignin:!1,like:!1,likes:0,comments:[]},e.checkLike=function(e){var t=R()&&R().user._id;return-1!==e.indexOf(t)},e.componentDidMount=function(){var t=e.props.match.params.postId;y(t).then(function(t){e.setState({post:t,likes:t.likes.length,comments:t.comments,like:e.checkLike(t.likes)})}).catch(function(e){return console.log(e)})},e.updateComments=function(t){e.setState({comments:t})},e.likeToggle=function(){if(!R())return e.setState({redirectToSignin:!0}),!1;var t=e.state.like?w:N,a=R().user._id,n=e.state.post._id;t(a,R().token,n).then(function(t){t.error?console.log(t.error):e.setState({like:!e.state.like,likes:t.likes.length})})},e.deletePost=function(){var t=e.props.match.params.postId,a=R().token;j(t,a).then(function(t){t.error?console.log(t.error):e.setState({redirectToHome:!0})})},e.deleteConfirmed=function(){window.confirm("Are you sure you want to delete your post?")&&e.deletePost()},e.renderPost=function(t){var a=t.postedBy?"/user/".concat(t.postedBy._id):"",n=t.postedBy?t.postedBy.name:" Unknown",o=e.state,c=o.like,s=o.likes;return r.a.createElement("div",{className:"card-body mb-5"},r.a.createElement(O.b,{to:"/",className:"btn btn-raised btn-link btn-md"},"Back to posts"),r.a.createElement("h2",null,t.title),r.a.createElement("img",{src:"/api/post/photo/".concat(t._id),alt:t.title,onError:function(e){return e.target.src="".concat(T.a)},className:"img-fluid mb-3",style:{height:"300px",width:"100%",objectFit:"cover",backgroundColor:"#0E2F56"}}),c?r.a.createElement("h3",{onClick:e.likeToggle},r.a.createElement("i",{className:"thumbs up outline icon text-success",style:{padding:"10px",borderRadius:"50%"}})," ",s," Like"):r.a.createElement("h3",{onClick:e.likeToggle},r.a.createElement("i",{className:"thumbs up outline icon text-warning",style:{padding:"10px",borderRadius:"50%"}})," ",s," Like"),r.a.createElement(Ne,{title:t.title}),r.a.createElement("hr",null),r.a.createElement("div",{className:"container",dangerouslySetInnerHTML:{__html:t.body}}),r.a.createElement("br",null),r.a.createElement("p",{className:"font-italic mark"},"Posted by ",r.a.createElement(O.b,{to:"".concat(a)},n," "),"on ",new Date(t.created).toDateString()),R().user&&R().user._id===t.postedBy._id&&r.a.createElement("div",null,r.a.createElement(O.b,{to:"/post/edit/".concat(t._id),className:"btn btn-raised btn-info btn-md"},"Update Post"),r.a.createElement("button",{onClick:e.deleteConfirmed,className:"btn btn-raised btn-md btn-danger"},"Delete Post")),r.a.createElement("div",null,R().user&&"admin"===R().user.role&&r.a.createElement("div",{className:"card mt-5"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Admin"),r.a.createElement("p",{className:"mb-2 text-danger"},"Edit/Delete as an Admin"),r.a.createElement(O.b,{to:"/post/edit/".concat(t._id),className:"btn btn-raised btn-warning btn-sm mr-5"},"Update Post"),r.a.createElement("button",{onClick:e.deleteConfirmed,className:"btn btn-raised btn-danger"},"Delete Post")))))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.post,a=e.redirectToHome,n=e.redirectToSignin,o=e.comments;return a?r.a.createElement(u.a,{to:"/"}):n?r.a.createElement(u.a,{to:"/login"}):r.a.createElement("div",{className:"container mt-5 mb-5"},t?this.renderPost(t):r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")),r.a.createElement(Ee,{postId:t._id,comments:o.reverse(),updateComments:this.updateComments}))}}]),a}(n.Component),ye=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).init=function(t){y(t).then(function(t){t.error?e.setState({redirectToProfile:!0}):e.setState({id:t.postedBy._id,title:t.title,body:t.body,error:""})})},e.isValid=function(){var t=e.state,a=t.title,n=t.body;return t.fileSize>1e6?(e.setState({error:"File size should be less than 100kb",loading:!1}),!1):0!==a.length&&0!==n.length||(e.setState({error:"All fields are required",loading:!1}),!1)},e.handleChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,o="photo"===t?a.target.files[0].size:0;e.postData.set(t,r),e.setState((n={},Object(q.a)(n,t,r),Object(q.a)(n,"fileSize",o),n))}},e.clickSubmit=function(t){if(t.preventDefault(),e.setState({loading:!0}),console.log(e.state),e.isValid()){var a=e.props.match.params.postId,n=R().token;x(a,n,e.postData).then(function(t){t.error?e.setState({error:t.error,loading:!1}):e.setState({loading:!1,redirect:"true",title:"",body:"",photo:"",error:""})})}},e.editPostForm=function(t,a){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Post Photo"),r.a.createElement("input",{onChange:e.handleChange("photo"),type:"file",accept:"image/*",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Title"),r.a.createElement("input",{onChange:e.handleChange("title"),type:"text",className:"form-control",value:t})),r.a.createElement("div",{className:"md-form"},r.a.createElement(de.a,{style:{height:"100px"},onInit:function(e){console.log("Editor is ready to use!",e),e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},onChange:function(t,a){var n=a.getData();e.postData.set("body",n),e.setState({body:n})},editor:fe.a,data:a})),r.a.createElement("button",{onClick:e.clickSubmit,className:"btn btn-raised btn-primary"},"Update Post"))},e.state={id:"",title:"",body:"",redirectToProfile:!1,error:"",fileSize:0,loading:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.postData=new FormData;var e=this.props.match.params.postId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.title,n=e.body,o=e.redirectToProfile,c=e.error,s=e.loading;return o?r.a.createElement(u.a,{to:"/user/".concat(R().user._id)}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"alert alert-danger",style:{display:c?"":"none"}},c),s?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):"",r.a.createElement("img",{style:{height:"200px",width:"auto"},className:"img-thumbnail",src:"/api/post/photo/".concat(this.props.match.params.postId),onError:function(e){return e.target.src="".concat(T.a)},alt:a}),R().user._id===t&&this.editPostForm(a,n))}}]),a}(n.Component),ke=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:"",message:"",error:""},e.forgotPassword=function(t){t.preventDefault(),e.setState({message:"",error:""}),I(e.state.email).then(function(t){t.error?(console.log(t.error),e.setState({error:t.error})):(console.log(t.message),e.setState({message:t.message}))})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Ask for Password Reset"),this.state.message&&r.a.createElement("h4",{className:"bg-success"},this.state.message),this.state.error&&r.a.createElement("h4",{className:"bg-warning"},this.state.error),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group mt-5"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Your email address",value:this.state.email,name:"email",onChange:function(t){return e.setState({email:t.target.value,message:"",error:""})},autoFocus:!0})),r.a.createElement("button",{onClick:this.forgotPassword,className:"btn btn-raised btn-primary"},"Send Password Rest Link")))}}]),a}(n.Component),je=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).resetPassword=function(e){e.preventDefault(),n.setState({message:"",error:""}),B({newPassword:n.state.newPassword,resetPasswordLink:n.props.match.params.resetPasswordToken}).then(function(e){e.error?(console.log(e.error),n.setState({error:e.error})):(console.log(e.message),n.setState({message:e.message,newPassword:""}))})},n.state={newPassword:"",message:"",error:""},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Reset your Password"),this.state.message&&r.a.createElement("h4",{className:"bg-success"},this.state.message),this.state.error&&r.a.createElement("h4",{className:"bg-warning"},this.state.error),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group mt-5"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Your new password",value:this.state.newPassword,name:"newPassword",onChange:function(t){return e.setState({newPassword:t.target.value,message:"",error:""})},autoFocus:!0})),r.a.createElement("button",{onClick:this.resetPassword,className:"btn btn-raised btn-primary"},"Reset Password")))}}]),a}(n.Component),xe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={redirectToHome:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){"admin"!==R().user.role&&this.setState({redirectToHome:!0})}},{key:"render",value:function(){return this.state.redirectToHome?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,"Admin Dashboard"),r.a.createElement("p",{className:"lead"},"Welcome to the Admin Dashboard of Suggest-it")),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",null,"Suggestions"),r.a.createElement("hr",null),r.a.createElement(F,null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",null,"Users"),r.a.createElement("hr",null),r.a.createElement(le,null)))))}}]),a}(n.Component),Se=a(59),Ce=function(){return r.a.createElement("div",{id:"main"},r.a.createElement("div",{className:"fof"},r.a.createElement("h1",null,"Error 404")))},Oe=function(){return r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0,component:A}),r.a.createElement(u.b,{path:"/signup",exact:!0,component:H}),r.a.createElement(u.b,{path:"/post/:postId",exact:!0,component:we}),r.a.createElement(be,{exact:!0,path:"/admin",component:xe}),r.a.createElement(be,{path:"/user/:userId",exact:!0,component:ne}),r.a.createElement(be,{path:"/post/edit/:postId",exact:!0,component:ye}),r.a.createElement(be,{path:"/user/edit/:userId",exact:!0,component:ie}),r.a.createElement(be,{path:"/findpeople",exact:!0,component:me}),r.a.createElement(be,{path:"/create/post",exact:!0,component:he}),r.a.createElement(u.b,{path:"/login",exact:!0,component:se}),r.a.createElement(u.b,{path:"/users",exact:!0,component:le}),r.a.createElement(u.b,{exact:!0,path:"/forgot-password",component:ke}),r.a.createElement(u.b,{exact:!0,path:"/reset-password/:resetPasswordToken",component:je}),r.a.createElement(u.b,{component:Ce})),r.a.createElement(Se.a,{className:"jumbrotron",bottomThreshold:50,normalStyles:{backgroundColor:"#0E2F56",padding:"2rem",color:"white",textAlign:"center"},stickyStyles:{backgroundColor:"rgba(14, 47, 86,.8)",padding:"2rem"}},"Suggest-it 2020 Exam"))},Pe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(Oe,null))}}]),a}(n.Component),Te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(Pe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Te?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Fe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Fe(t,e)})}}()},20:function(e,t,a){e.exports=a.p+"static/media/Default.525af8e0.png"},22:function(e,t,a){e.exports=a.p+"static/media/Logo.2effbb09.png"},63:function(e,t,a){e.exports=a(137)},68:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.389776fb.chunk.js.map